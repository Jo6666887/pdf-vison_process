# 📄 PDF智能解析工具

一个基于Streamlit的PDF智能解析工具，可以自动将PDF文件拆分为单页图片，并使用视觉AI模型进行内容解析。

## 🚀 功能特点

- 📄 **批量处理**: 支持同时上传多个PDF文件（最多20个）
- 🖼️ **智能拆分**: 自动将PDF拆分为高清PNG图片
- 🤖 **AI解析**: 使用先进的视觉AI模型批量解析每页内容
- ⚡ **并发处理**: 支持多客户端并发处理，大幅提高解析速度
- 📊 **实时进度**: 实时显示处理进度和状态
- 📁 **结构化存储**: 按照清晰的目录结构存储解析结果
- 🎨 **美观界面**: 现代化的Web界面，操作简单直观
- 🔧 **灵活配置**: 支持多种预设提示词和自定义配置

## 📋 系统要求

- **操作系统**: macOS, Linux, Windows
- **Python**: 3.8 或更高版本
- **内存**: 建议 4GB 以上
- **磁盘空间**: 根据处理的PDF数量而定

## 🔧 快速安装

### 方法一：自动安装（推荐）

```bash
# 克隆或下载项目到本地
cd pdf-parser-app

# 运行自动安装脚本
./install.sh
```

### 方法二：手动安装

#### 1. 安装系统依赖

**macOS:**
```bash
brew install poppler
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install poppler-utils
```

**CentOS/RHEL:**
```bash
sudo yum install poppler-utils
```

#### 2. 安装Python依赖

```bash
pip3 install -r requirements.txt
```

## 🚀 启动应用

### 使用启动脚本（推荐）

```bash
./start.sh
```

### 手动启动

```bash
streamlit run main_app.py
```

启动后，在浏览器中打开 `http://localhost:8501`

## 📖 使用指南

### 1. 基本配置

1. **设置输出目录**: 在右侧边栏选择解析结果的保存位置
2. **配置API密钥**: 输入您的ARK API密钥
3. **调整性能设置**: 根据您的硬件配置调整并发数和DPI

### 2. 上传文件

1. 在左侧区域点击"选择PDF文件"
2. 可以同时选择多个PDF文件（最多20个）
3. 查看文件列表确认上传的文件

### 3. 设置解析参数

1. 选择预设的提示词模板：
   - **通用文档分析**: 适用于大多数文档
   - **发票识别**: 专门用于发票信息提取
   - **合同分析**: 适用于合同文档
   - **表格提取**: 专门提取表格数据
   - **财务报表分析**: 分析财务报表
   - **证件识别**: 识别各类证件信息

2. 或者选择"自定义"输入您自己的提示词

### 4. 开始处理

1. 点击"🚀 开始处理"按钮
2. 观察实时进度显示
3. 等待处理完成

### 5. 查看结果

处理完成后，结果将按以下结构保存：

```
输出目录/
├── PDF文件名（不含扩展名）/
│   ├── pdf/              # 原始PDF文件
│   │   └── 原始文件.pdf
│   ├── slice-pics/       # 拆分的PNG图片
│   │   ├── 1.png
│   │   ├── 2.png
│   │   └── ...
│   └── summaries/        # AI解析结果
│       ├── 1.txt         # 第1页解析结果
│       ├── 2.txt         # 第2页解析结果
│       ├── ...
│       └── _summary.txt  # 处理汇总报告
```

## ⚙️ 高级配置

### API配置

在侧边栏的"API配置"部分：
- 输入您的ARK API密钥
- 系统会自动验证密钥格式

### 性能优化

在"性能设置"部分可以调整：
- **并发客户端数**: 1-5个，建议根据网络和硬件情况设置
- **PDF转图片DPI**: 100-400，DPI越高质量越好但文件越大
- **API超时时间**: 10-300秒，网络较慢时可以增加

### 预设提示词

系统提供多种预设提示词：

1. **通用文档分析**: 全面分析文档内容
2. **发票识别**: 提取发票的关键信息
3. **合同分析**: 分析合同条款和要点
4. **表格提取**: 以Markdown格式提取表格
5. **财务报表分析**: 分析财务数据和指标
6. **证件识别**: 识别证件信息

## 🔍 故障排除

### 常见问题

**1. PDF拆分失败**
- 检查是否正确安装了poppler
- 确认PDF文件没有损坏
- 检查磁盘空间是否充足

**2. API调用失败**
- 验证API密钥是否正确
- 检查网络连接
- 确认API服务是否正常

**3. 处理速度慢**
- 适当增加并发客户端数
- 降低DPI设置
- 检查网络带宽

**4. 内存不足**
- 减少同时处理的文件数量
- 降低DPI设置
- 关闭其他占用内存的程序

### 错误日志

如果遇到问题，可以查看：
- 终端输出的错误信息
- 输出目录中的错误文件（*_error.txt）
- 汇总报告（_summary.txt）

## 📊 性能建议

### 硬件配置建议

- **CPU**: 4核心以上
- **内存**: 8GB以上
- **网络**: 稳定的互联网连接
- **存储**: SSD硬盘（提高图片读写速度）

### 最佳实践

1. **批量处理**: 一次处理多个文件比单个处理更高效
2. **合理设置DPI**: 对于文字文档，200 DPI通常足够
3. **网络稳定**: 确保网络连接稳定，避免API调用失败
4. **定期清理**: 及时清理不需要的输出文件

## 🔒 安全说明

- API密钥仅在本地存储，不会上传到服务器
- 上传的PDF文件仅在本地处理
- 建议定期更换API密钥
- 不要在公共网络环境下使用

## 📝 更新日志

### v2.0 (当前版本)
- ✨ 全新的用户界面设计
- 🚀 支持多种预设提示词
- ⚡ 优化并发处理性能
- 📊 增加详细的进度显示
- 🔧 添加高级配置选项
- 📁 改进文件管理功能

### v1.0
- 🎉 初始版本发布
- 📄 基本PDF拆分功能
- 🤖 AI解析功能
- 📁 结构化存储

## 🤝 技术支持

如果您在使用过程中遇到问题：

1. 查看本README的故障排除部分
2. 检查终端输出的错误信息
3. 确认系统环境和依赖是否正确安装

## 📄 许可证

本项目仅供学习和研究使用。

## 🙏 致谢

- [Streamlit](https://streamlit.io/) - 优秀的Web应用框架
- [pdf2image](https://github.com/Belval/pdf2image) - PDF转图片工具
- [OpenAI](https://openai.com/) - AI API服务
- [ARK](https://ark.cn-beijing.volces.com/) - 视觉AI服务

---

**PDF智能解析工具** - 让文档处理更智能、更高效！